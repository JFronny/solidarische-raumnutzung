%!TEX root = ../Pflichtenheft.tex

% Kapitel 4
%-------------------------------------------------------------------------------

\chapter{Produktfunktionen}
\label{chap:product_functions}

\section{Unangemeldete Nutzer}\label{sec:unangemeldete-benutzer-funktionen}
\unsure[inline]{irgendwie sollten wir unter den funktionen noch klarstellen, wer welche funktionen Benutzen darf, dachte das wäre am elegantesten, andere/bessere Vorschläge sind auch wilkommen}
\begin{table}[htbp]
    \centering
%    \caption{Überblick von allen Funktionen.}
    \begin{tabularx}{\textwidth}{ l|X|l }
        \textbf{Nr.} & \textbf{Funktion} & \textbf{Kriterien} \\ \hline\hline
        \ref{F10} & Landeseite besuchen &~\ref{MK1}, ~\ref{WK1}, ~\ref{MK4} \\
        \ref{F20} & Login &~\ref{MK2} \\
        \ref{F70} & Anzeige des Raumstatus &~\ref{MK18} \\
    \end{tabularx}
    \label{tab:non_loggedin_functions}
\end{table}

\section{Angemeldete Nutzer}\label{sec:angemeldete-benutzer-funktionen}
\begin{table}[htbp]
    \centering
%    \caption{Überblick von allen Funktionen.}
    \begin{tabularx}{\textwidth}{ l|X|l }
        \textbf{Nr.} & \textbf{Funktion} & \textbf{Kriterien} \\ \hline\hline
        \ref{F10} & Landeseite besuchen &~\ref{MK1}, ~\ref{WK1}, ~\ref{MK4} \\
        \ref{F20} & Login &~\ref{MK2} \\
        \ref{F30} & Reservieren &~\ref{MK2}, ~\ref{MK8}, ~\ref{MK9}, ~\ref{MK10} \\
        \ref{F60} & Benachrichtigung bei freiem Raum &~\ref{MK17} \\
        \ref{F70} & Anzeige des Raumstatus &~\ref{MK18} \\
        \ref{F80} & Stornierung einer Reservierung &~\ref{MK14} \\
        \ref{F90} & Abmeldung &~\ref{MK3} \\
    \end{tabularx}
    \label{tab:loggedin_functions}
\end{table}
\newpage
\section{Administratoren}\label{sec:adminfunktionen}

\begin{table}[htbp]
    \centering
%    \caption{Überblick von allen Funktionen.}
    \begin{tabularx}{\textwidth}{ l|X|l }
        \textbf{Nr.} & \textbf{Funktion} & \textbf{Kriterien} \\ \hline\hline
        \ref{F10} & Landeseite besuchen &~\ref{MK1}, ~\ref{WK1}, ~\ref{MK4} \\
        \ref{F20} & Login &~\ref{MK2} \\
        \ref{F30} & Reservieren &~\ref{MK2}, ~\ref{MK8}, ~\ref{MK9}, ~\ref{MK10} \\
        \ref{F40} & Löschen von Terminen durch Administratoren &~\ref{MK16} \\
        \ref{F50} & Deaktivierung von Gastbenutzern &~\ref{MK16} \\
        \ref{F60} & Benachrichtigung bei freiem Raum &~\ref{MK17} \\
        \ref{F70} & Anzeige des Raumstatus &~\ref{MK18} \\
        \ref{F80} & Stornierung einer Reservierung &~\ref{MK14} \\
        \ref{F90} & Abmeldung &~\ref{MK3} \\

    \end{tabularx}
    \label{tab:adminfunctions}
\end{table}


\iffalse
In Abhängigkeit von den gewählten Konzepten erfolgt hier eine Konkretisierung
und Detaillierung der Funktionen aus den Use-Case-Diagrammen und ggf.\ dem
Angebot.

Die Produktfunktionen müssen die Kriterien aus den Zielbestimmungen abdecken.
Dabei kann es je nach Kriterium eine oder mehrere Funktionen geben.
Das nachfolgende Format sollte für einige Funktionsbeschreibungen übernommen werden:

Beispiel:\\
\begin{function}{10}{Lagerverwaltung}
    \item[Anwendungsfall:] Automatisches Einlagern
    \item[Anforderung:] \lfk{20} (Wenn kein Lastenheft vorhanden, dann Kriterium aus den Zielbestimmungen, z.B.: \ref{MK1})
    \item[Ziel:] Ein Reifen erscheint am Systemeingang (Scanner), erhält einen Lagerplatz
    zugewiesen und wird dort eingelagert.
    \item[Vorbedingung:] Das Scannen des Barcode-Reifens muss erfolgreich sein, sonst kann
    der Typ nicht ermittelt werden.
    Solche unbekannten Reifen werden direkt in den
    Überlauf gefördert.
    \item[Nachbedingung Erfolg:] Reifen ist physikalisch eingelagert und logisch in der
    Datenbank verbucht.
    \item[Nachbedingung Fehlschlag:] Der Reifen wurde infolge gestörter Fördermechanik
    nicht eingelagert (liegt im Überlauf) oder produzierte aufgrund inkonsistenter
    Datenbank einen `Platz belegt` - Fehler beim Anfahren eines irrtümlich
    als frei angenommenen Platzes.
    \item[Akteure:] ~Produktion
    \item[Auslösendes Ereignis:] SPS meldet der Steuerung, dass am Eingangsscanner ein
    Reifen mit Seriennummer X des Typs Y eingetroffen ist.
    \item[Beschreibung:] ~
    \begin{enumerate}
      \item Reifentypinformationen ermitteln (besonders Höhe des Reifens bei Wahl zwischen unterschiedlich hohen Lagerplätzen wichtig).
      \item Alle Module ermitteln, die\\
    - Platz auf den Einlagerstichen haben\\
    - momentan nicht im Störungszustand sind\\
    -  freie Lagerplätze in der geforderten Höhe aufweisen.
      \item Lagerplatz nach Gleichverteilungsgrundsatz bestimmen.
      \item Reifen auf den Einlagerstich des gewählten Moduls befördern.
      \item Sobald er auf dem vordersten Platz des Einlagerstichs steht, dem Modul den Befehl zur Reifenaufnahme und Einlagerung auf den gewählten Platz schicken.
    \end{enumerate}
    \item[Erweiterung:] (optional)\\
        2a Zur Effizienzsteigerung auch Module ansteuern, die momentan keinen Platz auf
        den Einlagerstichen haben, aber wahrscheinlich so schnell einlagern, dass der
        Reifen nach der Fahrtzeit zum Modul auf den Stich eingelagert werden kann
        (Überwachung des `Unterwegsbestandes` an Reifen für ein bestimmtes
        Modul).\\
        3a Lagerplatz des Reifens möglichst nah zum Einlagerstich im RBG wählen	(kürzere RBG-Fahrtzeiten).
    \item[Alternativen:] (optional)\\
        2a Wenn kein Lagerplatz gefunden wird, Reifen zum Überlauf schicken (der
        Einlagerförderer wird niemals angehalten!).
\end{function}
\fi

\begin{function}{10}{Startseite}
    \item[Anwendungsfall:] Initiales besuchen der Webseite
    \item[Anforderung:]~\ref{MK1}, ~\ref{MK4}, ~\ref{WK1}
    \item[Ziel:] Den Nutzenden wird ohne Anmeldung die Kalenderansicht gezeigt.
    \item[Vorbedingung:] Die Nutzenden haben eine Internetverbindung und im \gls{Browser}~die Webseite geöffnet.
    \item[Nachbedingung Erfolg:] Die Nutzenden sehen die Kalenderansicht mit zukünftigen Reservierungen.
    \item[Nachbedingung Fehlschlag:] Die Nutzenden sind nicht in der Lage mit der Webseite weiter zu interagieren.
    \item[Auslösendes Ereignis:] Die Nutzenden verwenden ihre \gls{Browser}~, um die Webseite aufzurufen.
    \item[Beschreibung:]~
    \begin{enumerate}
        \item Der Benutzer navigiert in seinem Browser auf die Webseite.
        \item Die Startseite lädt und zeigt dem Benutzer die Kalenderansicht an.
    \end{enumerate}
    \item[Erweiterung:] Sollte es mehr als ein Arbeitsraum geben, so sollte hier vom Nutzenden die Auswahl getroffen werden, bevor die Kalenderansicht angezeigt wird.
\end{function}

\pagebreak

\begin{function}{20}{Anmelden}
    \item[Anwendungsfall:] Anmelden bzw.\ Registrieren
    \item[Anforderung:]~\ref{MK2}, ~\ref{MK4}
    \item[Ziel:] Die Nutzenden können sich mit ihren KIT-Konten oder lokalen Gastkonten anmelden.
    \item[Vorbedingung:] Die Nutzenden haben eine Internetverbindung und die Anwendung ist gestartet.
    \item[Nachbedingung Erfolg:] Die Nutzenden sind angemeldet und können Ereignisse ansehen und bearbeiten.
    \item[Nachbedingung Fehlschlag:] Die Nutzenden sind nicht angemeldet und können keine Ereignisse ansehen oder bearbeiten.
    \item[Auslösendes Ereignis:] Die Nutzenden öffnen die Anwendung und versuchen, mit einem Termin zu erstellen oder mit einem bereits existierenden Termin zu interagieren.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Die Nutzenden wählen in einem Dialog die Anmeldemethode aus.
        \item Sollten diese noch keinen Account haben, so wird statt eine Anmeldung eine Registrierung vollzogen.
        \item Die Nutzenden werden, falls nötig, auf die KIT-Login-Seite weitergeleitet.
        \item Falls keine lokale Gast-Anmeldung gewählt wurde, geben die Nutzenden ihre Zugangsdaten ein.
        \item Die Anwendung überprüft die Zugangsdaten und meldet die Nutzenden an.
        \item Bei einer Gast-Anmeldung wird zusätzlich noch eine E-Mail hinterlegt.
        \item Die Nutzenden werden zur nächsten Seite weitergeleitet.
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{30}{Abmelden}
    \item[Anwendungsfall:] Abmelden
    \item[Anforderung:]~\ref{MK3}
    \item[Ziel:] Abmeldung eines Nutzenden
    \item[Vorbedingung:] Die Nutzenden sind in der Anwendung angemeldet.
    \item[Nachbedingung Erfolg:] Die Nutzenden sind nicht mehr angemeldet.
    \item[Nachbedingung Fehlschlag:] Die Nutzenden bleiben angemeldet.
    \item[Auslösendes Ereignis:] Die Nutzenden wählen die Option zum Abmelden aus.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Die Nutzenden wählen die Funktion zum Abmelden aus.
        \item Die Nutzenden werden zur Startseite weitergeleitet.
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{40}{Reservierung}
    \item[Anwendungsfall:] Reservierung
    \item[Anforderung:]~\ref{MK9} und~\ref{MK10}, ~\ref{MK12}, ~\ref{MK13}, ~\ref{MK14}, ~\ref{WK4} und~\ref{WK11}
    \item[Ziel:] Die nutzende Person kann einen Raum reservieren.
    \item[Vorbedingung:] Die nutzende Person ist angemeldet und in der Kalender-Ansicht.
    \item[Nachbedingung Erfolg:] Eine Reservierung wird gespeichert und die nutzende Person zur Buchungsseite weitergeleitet.
    \item[Nachbedingung Fehlschlag:] Die Reservierung wird nicht gespeichert und die nutzende Person erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Die nutzende Person wählt einen Startzeitpunkt.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Die nutzende Person wählt einen Start- und Endzeitpunkt und kann sie gegebenenfalls anpassen.
        \item Die nutzende Person gibt optional eine Beschreibung an.
        \item Die nutzende Person gibt an, ob sie bereit ist, den Raum mit weiteren zu teilen.
        \item Die nutzende Person wählt eine Prioritätsstufe.
        \item Die nutzende Person bestätigt ihre Eingaben.
        \item Die Anwendung prüft, ob der Raum in dem Zeitraum verfügbar ist.
        \item Ist dies der Fall, wird die Reservierung gespeichert und die nutzende Person zur Kalender-Ansicht weitergeleitet.
              Wenn nötig, wird eine E-Mail an die Ersteller*innen überschriebener Reservierungen gesendet.
    \end{enumerate}
    \item[Erweiterung:]
    \begin{enumerate}
        \item Nach dem Erstellen des Termins könnte dieser als iCal-Export zur verfügung gestellt werden.
        \item Durch einen zusätzlichen Quick-Checkin-Button könnte dieser Prozess simpler und kürzer gemacht werden.
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{50}{Löschen von Terminen durch das Adminkonto}
    \item[Anwendungsfall:] Löschen von Terminen durch das Adminkonto
    \item[Anforderung:] ~\ref{MK18}
    \item[Ziel:] Das Adminkonto kann bestehende Termine löschen.
    \item[Vorbedingung:] Das Adminkonto ist angemeldet und die Kalender-Ansicht wird angezeigt.
    \item[Nachbedingung Erfolg:] Der Termin wird aus dem System entfernt und das Adminkonto erhält eine Erfolgsmeldung.
    \item[Nachbedingung Fehlschlag:] Der Termin wird nicht gelöscht und das Adminkonto erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Das Adminkonto wählt einen Termin aus, welcher gelöscht werden soll.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Das Adminkonto öffnet die Kalender-Ansicht.
        \item Das Adminkonto wählt den Termin aus, welcher gelöscht werden soll.
        \item Das Adminkonto wird gefragt, ob es den Termin wirklich löschen möchte (Bestätigungsabfrage).
        \item Falls das Adminkonto bestätigt, wird der Termin gelöscht.
        \item Eine Bestätigungsmeldung wird angezeigt (z.B.\ `Termin erfolgreich gelöscht').
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{60}{Deaktivierung von Konten}
    \item[Anwendungsfall:] Deaktivierung von Konten
    \item[Anforderung:] ~\ref{MK19} \todo{remove this function or change MK19.}
    \item[Ziel:] Das Gastkonto wird vom Admin gesperrt.
    \item[Vorbedingung:] Das Adminkonto ist angemeldet und in der Nutzer*innen-Ansicht.
    \item[Nachbedingung Erfolg:] Der Gastbenutzer wird deaktiviert und kann sich nicht mehr Anmelden.
    \item[Nachbedingung Fehlschlag:] Der Gastbenutzer bleibt aktiv und der Admin erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Das Adminkonto wählt einen Gastbenutzer aus, den es deaktivieren möchte.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Das Adminkonto öffnet die Liste der Konten (Nutzer*innen-Ansicht).
        \item Der Admin wählt einen Gastbenutzer aus, welcher deaktiviert werden soll.
        \item Das Adminkonto bestätigt die Deaktivierung.
        \item Das Konto wird deaktiviert und aus der aktiven Liste entfernt.
        \item Eine Bestätigungsmeldung wird angezeigt (z.B.\ \textit{Gastbenutzer erfolgreich deaktiviert}).
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{70}{Benachrichtigung bei freiem Raum}
    \item[Anwendungsfall:] Benachrichtigung über freigewordenen Raum
    \item[Anforderung:] ~\ref{WK10}
    \item[Ziel:] Die Anwendung informiert Nutzende, wenn ein Raum wieder frei wird.
    \item[Vorbedingung:] Die Nutzenden haben sich für den Raum interessiert und haben eine Benachrichtigung angefordert.
    \item[Nachbedingung Erfolg:] Die Nutzenden werden über die Freigabe des Raums per E-Mail oder Benachrichtigung informiert.
    \item[Nachbedingung Fehlschlag:] Die Nutzenden erhalten keine Benachrichtigung, und eine Fehlermeldung wird angezeigt.
    \item[Auslösendes Ereignis:] Der Raum wird freigegeben, nachdem eine vorherige Reservierung aufgehoben oder geändert wurde.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Die Nutzenden wählen aus, ob sie für den Raum Benachrichtigungen erhalten möchten, wenn er wieder frei wird.
        \item Die Nutzenden geben eine E-Mail-Adresse an, um die Benachrichtigungen zu empfangen (Sollte keine hinterlegt sein über KIT-Account).
        \item Sobald der Raum wieder verfügbar ist, prüft das System, ob Nutzende für den Raum eine Benachrichtigung angefordert haben.
        \item Den betroffenen Nutzenden wird eine E-Mail oder Benachrichtigung zugeschickt, dass der Raum nun wieder verfügbar ist.
        \item Eine Bestätigung der erfolgreichen Benachrichtigung wird im System protokolliert.
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{80}{Anzeige des Raumstatus}
    \item[Anwendungsfall:] Anzeige des Raumstatus
    \item[Anforderung:] \todo{Add crits}
    \item[Ziel:] Die Anwendung stellt den Raumstatus, einschließlich der aktuellen Belegung und Priorität, übersichtlich dar.
    \item[Vorbedingung:] Die Nutzenden sind auf der Kalender-Ansicht und müssen nicht angemeldet sein.
    \item[Nachbedingung Erfolg:] Der Raumstatus wird auf einer öffentlichen Seite korrekt angezeigt, inklusive Belegung und Priorität (z.B.\ durch farbige Banner).
    \item[Nachbedingung Fehlschlag:] Der Raumstatus wird nicht angezeigt oder ist unvollständig.
    \item[Auslösendes Ereignis:] Die Nutzenden öffnen die Kalender-Ansicht.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Die Nutzenden öffnen die Seite.
        \item Die Belegung des Raumes wird mit dem entsprechenden Status angezeigt, der die aktuelle Belegung widerspiegelt.
        \item Falls der Raum belegt ist, wird dies deutlich sichtbar gemacht (z.B.\ durch ein Banner oder ein entsprechendes Symbol).
        \item Dabei wird die Priorität klar dargestellt.
        \item Der Raumstatus ist für alle Nutzenden sichtbar, ohne dass eine Anmeldung erforderlich ist.
    \end{enumerate}
\end{function}

\pagebreak

\begin{function}{90}{Stornierung einer Reservierung}
    \item[Anwendungsfall:] Stornierung einer Reservierung
    \item[Anforderung:] ~\ref{MK16}
    \item[Ziel:] Die Nutzenden können eine bestehende Reservierung stornieren.
    \item[Vorbedingung:] Die Nutzenden sind angemeldet und haben eine aktive Reservierung.
    \item[Nachbedingung Erfolg:] Die Reservierung wird storniert und die Nutzenden erhalten eine Erfolgsmeldung.
    \item[Nachbedingung Fehlschlag:] Die Reservierung wird nicht storniert und die Nutzenden erhalten eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Die Nutzenden wählen die Option zur Stornierung einer bestehenden Reservierung.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Die Nutzenden öffnen die Seite mit ihren aktuellen Reservierungen.
        \item Die Nutzenden wählen die Reservierung aus, die sie stornieren möchten.
        \item Die Nutzenden bestätigen die Stornierung der Reservierung (z.B.\ durch Klick auf \textit{Reservierung stornieren}).
        \item Eine Bestätigungsabfrage erscheint, in der die Nutzenden die Stornierung bestätigen müssen.
        \item Falls die Nutzenden bestätigen, wird die Reservierung storniert.
        \item Das System aktualisiert die Raumverfügbarkeit und zeigt den Nutzenden eine Bestätigungsmeldung (z.B.\ \textit{Reservierung erfolgreich storniert}).
        \item Die Nutzenden erhalten ggf.\ eine E-Mail oder eine Benachrichtigung über die Stornierung (optional).
    \end{enumerate}
\end{function}

\begin{function}{90}{Abmeldung}
    \item[Anwendungsfall:] Abmeldung des Nutzenden
    \item[Anforderung:] ~\ref{MK2}
    \item[Ziel:] Der Nutzende kann sich von der Anwendung abmelden.
    \item[Vorbedingung:] Der Nutzende ist angemeldet.
    \item[Nachbedingung Erfolg:] Der Nutzende ist abgemeldet und wird auf die Landeseite weitergeleitet.
    \item[Nachbedingung Fehlschlag:] Der Nutzende ist nicht abgemeldet und erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Der Nutzende wählt die Option zur Abmeldung.
    \begin{enumerate}
        \item Der Nutzende wählt die Abmelde Option.
        \item Der Nutzende wird abgemeldet und auf die Landeseite weitergeleitet.
    \end{enumerate}
\end{function}

