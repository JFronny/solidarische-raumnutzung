%!TEX root = ../Pflichtenheft.tex

% Kapitel 4
%-------------------------------------------------------------------------------

\chapter{Produktfunktionen}
\label{chap:product_functions}

\iffalse
In Abhängigkeit von den gewählten Konzepten erfolgt hier eine Konkretisierung
und Detaillierung der Funktionen aus den Use-Case-Diagrammen und ggf. dem
Angebot.

Die Produktfunktionen müssen die Kriterien aus den Zielbestimmungen abdecken.
Dabei kann es je nach Kriterium eine oder mehrere Funktionen geben.
Das nachfolgende Format sollte für einige Funktionsbeschreibungen übernommen werden:

Beispiel:\\
\begin{function}{10}{Lagerverwaltung}
    \item[Anwendungsfall:] Automatisches Einlagern
    \item[Anforderung:] \lfk{20} (Wenn kein Lastenheft vorhanden, dann Kriterium aus den Zielbestimmungen, z.B.: \ref{RM1})
    \item[Ziel:] Ein Reifen erscheint am Systemeingang (Scanner), erhält einen Lagerplatz
    zugewiesen und wird dort eingelagert.
    \item[Vorbedingung:] Das Scannen des Barcode-Reifens muss erfolgreich sein, sonst kann
    der Typ nicht ermittelt werden. Solche unbekannten Reifen werden direkt in den
    Überlauf gefördert.
    \item[Nachbedingung Erfolg:] Reifen ist physikalisch eingelagert und logisch in der
    Datenbank verbucht.
    \item[Nachbedingung Fehlschlag:] Der Reifen wurde infolge gestörter Fördermechanik
    nicht eingelagert (liegt im Überlauf) oder produzierte aufgrund inkonsistenter
    Datenbank einen `Platz belegt` - Fehler beim Anfahren eines irrtümlich
    als frei angenommenen Platzes.
    \item[Akteure:] ~Produktion
    \item[Auslösendes Ereignis:] SPS meldet der Steuerung, dass am Eingangsscanner ein
    Reifen mit Seriennummer X des Typs Y eingetroffen ist.
    \item[Beschreibung:] ~
    \begin{enumerate}
      \item Reifentypinformationen ermitteln (besonders Höhe des Reifens bei Wahl zwischen unterschiedlich hohen Lagerplätzen wichtig).
      \item Alle Module ermitteln, die\\
    - Platz auf den Einlagerstichen haben\\
    - momentan nicht im Störungszustand sind\\
    -  freie Lagerplätze in der geforderten Höhe aufweisen.
      \item Lagerplatz nach Gleichverteilungsgrundsatz bestimmen.
      \item Reifen auf den Einlagerstich des gewählten Moduls befördern.
      \item Sobald er auf dem vordersten Platz des Einlagerstichs steht, dem Modul den Befehl zur Reifenaufnahme und Einlagerung auf den gewählten Platz schicken.
    \end{enumerate}
    \item[Erweiterung:] (optional)\\
        2a Zur Effizienzsteigerung auch Module ansteuern, die momentan keinen Platz auf
        den Einlagerstichen haben, aber wahrscheinlich so schnell einlagern, dass der
        Reifen nach der Fahrtzeit zum Modul auf den Stich eingelagert werden kann
        (Überwachung des `Unterwegsbestandes` an Reifen für ein bestimmtes
        Modul).\\
        3a Lagerplatz des Reifens möglichst nah zum Einlagerstich im RBG wählen	(kürzere RBG-Fahrtzeiten).
    \item[Alternativen:] (optional)\\
        2a Wenn kein Lagerplatz gefunden wird, Reifen zum Überlauf schicken (der
        Einlagerförderer wird niemals angehalten!).
\end{function}
\fi

\begin{function}{10}{Login}
    \item[Anwendungsfall:] Login
    \item[Anforderung:]~\ref{RM2}
    \item[Ziel:] Der Benutzer kann sich mit seinem KIT-Konto oder einem lokalen Gastkonto anmelden.
    \item[Vorbedingung:] Der Benutzer hat eine Internetverbindung und die Anwendung ist gestartet.
    \item[Nachbedingung Erfolg:] Der Benutzer ist angemeldet und kann Ereignisse ansehen und bearbeiten.
    \item[Nachbedingung Fehlschlag:] Der Benutzer ist nicht angemeldet und kann keine Ereignisse ansehen oder bearbeiten.
    \item[Auslösendes Ereignis:] Der Benutzer öffnet die Anwendung und versucht, mit einem Ereignis zu interagieren.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Benutzer wählt in einem Dialog die Anmeldemethode aus.
        \item Der Benutzer wird, falls nötig, auf die KIT-Login-Seite weitergeleitet.
        \item Falls keine lokale Anmeldung gewählt wurde, gibt der Benutzer seine Zugangsdaten ein.
        \item Die Anwendung überprüft die Zugangsdaten und meldet den Benutzer an.
        \item Der Benutzer wird zur nächsten Seite weitergeleitet.
    \end{enumerate}
\end{function}
\begin{function}{20}{Reservierung}
    \item[Anwendungsfall:] Reservierung
    \item[Anforderung:]~\ref{RM3},~\ref{RM8},~\ref{RM9} und~\ref{RM10}
    \item[Ziel:] Der Benutzer kann einen Raum reservieren.
    \item[Vorbedingung:] Der Benutzer ist angemeldet und hat eine Internetverbindung.
    \item[Nachbedingung Erfolg:] Eine Reservierung wird gespeichert und der Benutzer zur Buchungsseite weitergeleitet.
    \item[Nachbedingung Fehlschlag:] Die Reservierung wird nicht gespeichert und der Benutzer erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Der Benutzer wählt einen Raum und einen Startzeitpunkt.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Benutzer prüft einen Start- und Endzeitpunkt und kann sie gegebenenfalls anpassen.
        \item Der Benutzer gibt optional eine Beschreibung an.
        \item Der Benutzer gibt an, ob er bereit ist, die Reservierung zu teilen.
        \item Der Benutzer gibt optional eine E-Mail-Adresse an, um über Änderungen informiert zu werden.
        \item Falls eine E-Mail-Adresse angegeben wurde, kann der Benutzer diese als in der Oberfläche sichtbar oder unsichtbar markieren.
        \item Der Benutzer bestätigt seine Eingaben.
        \item Die Anwendung prüft, ob der Raum in dem Zeitraum verfügbar ist.
        \item Falls ja, wird die Reservierung gespeichert und der Nutzer weitergeleitet.
              Wenn nötig, wird eine E-Mail an die Ersteller überschriebener Reservierungen gesendet.
    \end{enumerate}
\end{function}
\begin{function}{30}{Löschen von Terminen}
    \item[Anwendungsfall:] Löschen von Terminen
    \item[Anforderung:] ~\ref{RM16}
    \item[Ziel:] Der Administrator kann bestehende Termine löschen.
    \item[Vorbedingung:] Der Administrator ist angemeldet.
    \item[Nachbedingung Erfolg:] Der Termin wird aus dem System entfernt und der Administrator erhält eine Bestätigungsmeldung.
    \item[Nachbedingung Fehlschlag:] Der Termin wird nicht gelöscht und der Administrator erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Der Administrator wählt einen Termin aus, den er löschen möchte.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Administrator öffnet die Liste der bestehenden Termine.
        \item Der Administrator wählt den Termin aus, den er löschen möchte.
        \item Der Administrator wird gefragt, ob er den Termin wirklich löschen möchte (Bestätigungsabfrage).
        \item Falls der Administrator bestätigt, wird der Termin gelöscht.
        \item Eine Bestätigungsmeldung wird angezeigt (z. B. "Termin erfolgreich gelöscht").
    \end{enumerate}
\end{function}

\begin{function}{40}{Deaktivierung von Gastbenutzern}
    \item[Anwendungsfall:] Deaktivierung von Gastbenutzern
    \item[Anforderung:] ~\ref{RM16}
    \item[Ziel:] Der Administrator kann Gastbenutzer deaktivieren.
    \item[Vorbedingung:] Der Administrator ist angemeldet und hat die entsprechenden Berechtigungen.
    \item[Nachbedingung Erfolg:] Der Gastbenutzer wird deaktiviert und ist nicht mehr im System aktiv.
    \item[Nachbedingung Fehlschlag:] Der Gastbenutzer bleibt aktiv und der Administrator erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Der Administrator wählt einen Gastbenutzer aus, den er deaktivieren möchte.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Administrator öffnet die Liste der Gastbenutzer.
        \item Der Administrator wählt einen Gastbenutzer aus, den er deaktivieren möchte.
        \item Der Administrator bestätigt die Deaktivierung.
        \item Der Gastbenutzer wird deaktiviert und aus der aktiven Liste entfernt.
        \item Eine Bestätigungsmeldung wird angezeigt (z. B. "Gastbenutzer erfolgreich deaktiviert").
    \end{enumerate}
\end{function}

\begin{function}{50}{Benachrichtigung bei freiem Raum}
    \item[Anwendungsfall:] Benachrichtigung über freigewordenen Raum
    \item[Anforderung:] ~\ref{RM17}
    \item[Ziel:] Die Anwendung informiert Benutzer, wenn ein Raum wieder frei wird.
    \item[Vorbedingung:] Der Benutzer hat sich für den Raum interessiert und hat eine Benachrichtigung angefordert.
    \item[Nachbedingung Erfolg:] Der Benutzer wird über die Freigabe des Raums per E-Mail oder Benachrichtigung informiert.
    \item[Nachbedingung Fehlschlag:] Der Benutzer erhält keine Benachrichtigung, und eine Fehlermeldung wird angezeigt.
    \item[Auslösendes Ereignis:] Der Raum wird freigegeben, nachdem eine vorherige Reservierung aufgehoben oder geändert wurde.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Benutzer wählt aus ob er für den Raum Benachrichtigungen erhalten möchte, wenn er wieder frei wird.
        \item Der Benutzer gibt eine E-Mail-Adresse an, um die Benachrichtigungen zu empfangen (Sollte keine hinterlegt sein über KIT-Account).
        \item Sobald der Raum wieder verfügbar ist, prüft das System, ob Benutzer für den Raum eine Benachrichtigung angefordert haben.
        \item Den betroffenen Benutzern wird eine E-Mail oder Benachrichtigung zugeschickt, dass der Raum nun wieder verfügbar ist.
        \item Eine Bestätigung der erfolgreichen Benachrichtigung wird im System protokolliert.
    \end{enumerate}
\end{function}

\begin{function}{60}{Anzeige des Raumstatus}
    \item[Anwendungsfall:] Anzeige des Raumstatus
    \item[Anforderung:] ~\ref{RM18}
    \item[Ziel:] Die Anwendung stellt den Raumstatus, einschließlich der aktuellen Belegung und Priorität, übersichtlich dar.
    \item[Vorbedingung:] Der Benutzer ist nicht eingeloggt.
    \item[Nachbedingung Erfolg:] Der Raumstatus wird auf einer öffentlichen Seite korrekt angezeigt, inklusive Belegung und Priorität (z. B. durch farbige Banner).
    \item[Nachbedingung Fehlschlag:] Der Raumstatus wird nicht angezeigt oder ist unvollständig.
    \item[Auslösendes Ereignis:] Der Benutzer öffnet die Seite mit den Informationen zu den Räumen.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Benutzer öffnet die Seite.
        \item Der Raum wird mit dem entsprechenden Status angezeigt, der die aktuelle Belegung widerspiegelt.
        \item Falls der Raum belegt ist, wird dies deutlich sichtbar gemacht (z. B. durch einen roten Banner oder ein entsprechendes Symbol).
        \item Falls der Raum eine höhere Priorität hat, wird diese Information ebenfalls angezeigt, z. B. durch einen farbigen Banner oder ein Symbol, das den Raum hervorhebt.
        \item Der Raumstatus ist für alle Benutzer sichtbar, ohne dass eine Anmeldung erforderlich ist.
    \end{enumerate}
\end{function}

\begin{function}{70}{Stornierung einer Reservierung}
    \item[Anwendungsfall:] Stornierung einer Reservierung
    \item[Anforderung:] ~\ref{RM14}
    \item[Ziel:] Der Benutzer kann eine bestehende Reservierung stornieren.
    \item[Vorbedingung:] Der Benutzer ist angemeldet und hat eine aktive Reservierung.
    \item[Nachbedingung Erfolg:] Die Reservierung wird storniert und der Benutzer erhält eine Bestätigungsmeldung.
    \item[Nachbedingung Fehlschlag:] Die Reservierung wird nicht storniert und der Benutzer erhält eine Fehlermeldung.
    \item[Auslösendes Ereignis:] Der Benutzer wählt die Option zur Stornierung einer bestehenden Reservierung.
    \item[Beschreibung:] ~
    \begin{enumerate}
        \item Der Benutzer öffnet die Seite mit seinen aktuellen Reservierungen.
        \item Der Benutzer wählt die Reservierung aus, die er stornieren möchte.
        \item Der Benutzer bestätigt die Stornierung der Reservierung (z. B. durch Klick auf „Reservierung stornieren“).
        \item Eine Bestätigungsabfrage erscheint, in der der Benutzer die Stornierung bestätigen muss.
        \item Falls der Benutzer bestätigt, wird die Reservierung storniert.
        \item Das System aktualisiert die Raumverfügbarkeit und zeigt dem Benutzer eine Bestätigungsmeldung (z. B. "Reservierung erfolgreich storniert").
        \item Der Benutzer erhält ggf. eine E-Mail oder eine Benachrichtigung über die Stornierung (optional).
    \end{enumerate}
\end{function}

